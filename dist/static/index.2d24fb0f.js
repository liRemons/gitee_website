var e=Object.assign;import{r as t,w as o,s as a,t as l,p as n,a as r,g as i,b as s,v as c,x as d,o as u,c as h,d as m,y as p,F as g,e as f,i as T}from"./vendor.c015448b.js";const y={setup(){let n=[],r=!1;const{proxy:s}=i(),c=t({html:"",authorList:[],title:""});o((()=>s.$route),((e,t)=>{e.path+e.query.id!==t.path+t.query.id&&(c.title="",n=[],c.authorList=[],e.query.id&&d())}));const d=async()=>{c.html="";let e=await s.$api.HOME.getFileOption(s.$route.query.id);c.html=e,s.$nextTick((()=>{document.querySelectorAll(".CodeMirror").forEach((e=>{let t=document.createElement("div");t.setAttribute("class","copy_code"),e.appendChild(t)})),u()}))};a((()=>{let e=document.querySelector(".md");s.$utils.watchScroll(h,500,e),d()}));const u=()=>{let e=[];n=[];let t=document.querySelectorAll(".md .md-header-anchor");t.forEach((o=>{"H2"===o.parentNode.nodeName&&1!=t.length||e.push({outerHTML:o.parentNode.outerHTML.replace(/<a.*?>([\s\S]*)<\/a>/,""),innerText:o.parentNode.innerText,nodeName:o.parentNode.nodeName,offsetTop:o.parentNode.offsetTop,offsetHeight:o.parentNode.offsetTop+o.parentNode.clientHeight,classActive:!1})})),c.authorList=e,s.$nextTick((()=>{let e=s.$route.query.index;e&&(g(e),h())})),n=e},h=()=>{if(r){let e=document.querySelector(".md").scrollTop||document.documentElement.scrollTop,t=n.findIndex((t=>e+100<t.offsetHeight))-1;m(),t>0&&(c.authorList[t].classActive=!0,p(t)),s.$nextTick((()=>{let e=document.querySelector(".author"),t=document.querySelector(".author .active");Number(t.offsetTop)>window.innerHeight-150&&(e.scrollTop=Number(t.offsetTop)-100)}))}r=!0},m=()=>{c.authorList.forEach((e=>{e.classActive=!1}))},p=e=>{const{$route:t}=s;s.$router.replace({path:t.path,query:{id:t.query.id,index:e}})},g=e=>{let t;m(),c.authorList[e].classActive=!0,p(e),r=!1,document.querySelectorAll(".md-header-anchor").forEach((o=>{o.parentNode.innerText===c.authorList[e].innerText&&(t=o)})),t&&t.scrollIntoView({behavior:"smooth"})};return e(e({},l(c)),{scrollTo:g,submit:()=>{u(),c.title&&(c.authorList=c.authorList.filter((e=>e.innerText.includes(c.title)))),0==c.authorList.length&&u()},handleClick:e=>{if("copy_code"===e.target.className)return s.$utils.copy(e.target.parentElement),void s.$message.success("复制成功");s.$utils.viewImg()}})}},v=T("data-v-56abeca0");n("data-v-56abeca0");const L={class:"flex","element-loading-text":"加载页面中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255,255, 255, 0.4)"},b={class:"author","element-loading-text":"加载目录中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255,255, 255, 0.2)"};r();const x=v(((e,t,o,a,l,n)=>{const r=s("el-button"),i=s("el-input"),T=s("el-affix"),y=s("el-backtop"),x=c("loading");return d((u(),h("div",L,[d(m("div",b,[e.authorList.length?(u(),h(T,{key:0,offset:60},{default:v((()=>[m(i,{size:"mini",onChange:a.submit,modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=t=>e.title=t),placeholder:"请输入标题"},{append:v((()=>[m(r,{onClick:a.submit,icon:"el-icon-search"},null,8,["onClick"])])),_:1},8,["onChange","modelValue"])])),_:1})):p("",!0),(u(!0),h(g,null,f(e.authorList,((e,t)=>(u(),h("div",{class:{active:e.classActive},key:e.outerHTML,onClick:e=>a.scrollTo(t),innerHTML:e.outerHTML},null,10,["onClick","innerHTML"])))),128))],512),[[x,!e.authorList.length]]),m("div",{class:"md",innerHTML:e.html,onClick:t[2]||(t[2]=(...e)=>a.handleClick&&a.handleClick(...e))},null,8,["innerHTML"]),m(y,{target:".md"})],512)),[[x,!e.html]])}));y.render=x,y.__scopeId="data-v-56abeca0";export default y;
