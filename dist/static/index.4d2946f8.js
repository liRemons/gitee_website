var e=Object.assign;import{r as t,w as a,o,t as r,p as s,a as i,g as l,b as n,c,d as u,e as d,F as h,f as m,i as p,H as v,I as L,j as T}from"./vendor.31214579.js";const y={setup(){let s=[],i=!1;const{proxy:n}=l(),c=t({html:"",authorList:[]});a((()=>n.$route),((e,t)=>{e.path+e.query.id!==t.path+t.query.id&&(s=[],c.authorList=[],e.query.id&&u())}));const u=async()=>{c.html="";let e=await n.$api.HOME.getFileOption(n.$route.query.id);c.html=e,n.$nextTick((()=>{[...document.querySelectorAll("#write a")].filter((e=>e.outerHTML.includes("#"))).forEach((e=>{e.onclick=e=>{let t=c.authorList.findIndex((t=>decodeURIComponent(e.target.parentNode.hash).replace("#","")===t.innerText));return t>=0&&v(t),!1}})),document.querySelectorAll(".md-fences").forEach((e=>{let t=document.createElement("div");t.setAttribute("class","copy_code"),t.onclick=e=>{n.$utils.copy(e.target.parentElement),n.$message.success("复制成功")},e.appendChild(t)})),d(),n.$route.query.index&&v(n.$route.query.index)}))};o((()=>{let e=document.querySelector(".md");n.$utils.watchScroll(h,500,e),u()}));const d=()=>{let e=[];s=[];let t=document.querySelectorAll(".md .md-header-anchor");t.forEach(((a,o)=>{if("H2"!==a.parentNode.nodeName||1==t.length){const{innerText:t,nodeName:r,offsetTop:s,outerHTML:i}=a.parentNode;e.push({outerHTML:i.replace(/<a.*?>([\s\S]*)<\/a>/,""),innerText:t,nodeName:r,offsetTop:s,classActive:!1,index:o})}})),c.authorList=e,s=e},h=()=>{if(i){let e=document.querySelector(".md").scrollTop||document.documentElement.scrollTop,t=Math.max(...s.map(((t,a)=>{if(e>=t.offsetTop)return a})).filter((e=>void 0!==e)));m(),t>=0&&(c.authorList[t].classActive=!0,p(t))}i=!0,n.$nextTick((()=>{let e=document.querySelector(".active");e&&e.scrollIntoView({behavior:"smooth"})}))},m=()=>{c.authorList.forEach((e=>{e.classActive=!1}))},p=e=>{const{$route:t}=n;n.$router.replace({path:t.path,query:{id:t.query.id,index:e}})},v=(e,t)=>{var a;let o;m(),c.authorList[e]?(c.authorList[e].classActive=!0,o=c.authorList[e].innerText):(c.authorList[t].classActive=!0,o=c.authorList[t].innerText),p(e),i=!1;let r=null==(a=[...document.querySelectorAll(".md-header-anchor")].filter((e=>e.parentNode.innerText===o&&e)))?void 0:a[0];r&&r.scrollIntoView({behavior:"smooth"})};return e(e({},r(c)),{scrollTo:v,submit:()=>{n.$prompt("请输入标题","提示",{}).then((({value:e})=>{e&&(c.authorList=c.authorList.filter((t=>t.innerText.toLowerCase().includes(e.toLowerCase())))),0==c.authorList.length&&d()})),d()},handleClick:e=>{n.$utils.viewImg()}})}},f=T("data-v-2aadae52");s("data-v-2aadae52");const x={class:"flex"},g={class:"author"},k={key:0,class:"tc",style:{width:"100%"}},q={class:"tc",style:{width:"100%",background:"rgba(255, 255, 255, 0.5)",margin:"0 20px"}};i();const $=f(((e,t,a,o,r,s)=>{const i=n("el-button"),l=n("el-empty"),T=n("el-backtop");return c(),u("div",x,[d("div",g,[d(i,{icon:"el-icon-search",size:"mini",class:"search",circle:"",onClick:o.submit},null,8,["onClick"]),(c(!0),u(h,null,m(e.authorList,((e,t)=>(c(),u("div",{class:{active:e.classActive},key:e.outerHTML,onClick:a=>o.scrollTo(e.index,t),innerHTML:e.outerHTML},null,10,["onClick","innerHTML"])))),128)),0==e.authorList.length?(c(),u("div",k,[d(l,{"image-size":200,description:"暂无数据"})])):p("",!0)]),v(d("div",{class:"md",innerHTML:e.html,onClick:t[1]||(t[1]=(...e)=>o.handleClick&&o.handleClick(...e))},null,8,["innerHTML"]),[[L,e.html]]),v(d("div",q,[d(l,{"image-size":200,description:"暂无数据"})],512),[[L,!e.html]]),d(T,{target:".md"})])}));y.render=$,y.__scopeId="data-v-2aadae52";export default y;
